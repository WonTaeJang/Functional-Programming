<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
    </head>
    <body>
        회원 목록, map, filter <br />

        <script type = "text/javascript">

            var users = [
                {id:1, name: 'ID', age: 45},
                {id:2, name: 'BF', age: 32},
                {id:3, name: 'DG', age: 46},
                {id:4, name: 'AS', age: 42},
                {id:5, name: 'EF', age: 24},
                {id:6, name: 'IE', age: 36},
                {id:7, name: 'SR', age: 65},
                {id:8, name: 'AC', age: 41},
                {id:9, name: 'XX', age: 12}
            ];

            // 30세 이상 객체
            var temp_users = [];
            for(var i = 0; i < users.length; i++){
                if(users[i].age >= 30){
                    temp_users.push(users[i]);
                }
            }
            console.log(temp_users);

            // 30세 이상인 users의 names
            var names = [];
            for(var i = 0; i < temp_users.length; i++){
                names.push(temp_users[i].name);
            }
            console.log(names);

            // 30세 미만
            var temp_users = [];
            for(var i = 0; i < users.length; i++){
                if(users[i].age < 30){
                    temp_users.push(users[i]);
                }
            }
            console.log(temp_users);

            // 30세 미만 users의 names
            var ages = [];
            for(var i = 0; i < temp_users.length; i++){
                names.push(temp_users[i].age);
            }
            console.log(ages);

            // 2. _filter, _map으로 리팩토링
            function _filter(users, predi) {       // 응용형 함수, 고차함수(함수를 인자로 받거나 함수를 리턴하거나)
                var new_list = [];
                for(var i = 0; i < users.length; i++){
                    if(predi(users[i])){
                        new_list.push(users[i])
                    }
                }
                return new_list;
            }

            console.log(
                _filter(users, function(user){ return user.age >= 30;})
            );
            
            // console.log(
            //     _filter([1,2,3,4], function(num){return num % 2;})
            // );

            function _map(list, mapper){
                var new_list = [];
                for(var i = 0; i < list.length; i++){
                    new_list.push(mapper(list[i]));
                }
                return new_list;
            }

            var over_30 = _filter(users, function(user){return user.age >= 30;});
            console.log(over_30);

            var names = _map(over_30, function(user){
                return user.name;
            })
            console.log(names);

            var under_30 = _filter(users, function(user){return user.age < 30;});
            console.log(under_30);

            var ages = _map(under_30, function(user){
                return user.age;
            });
            console.log(ages);

            // 함수를 간결하게 만들어보기
            console.log(
                _map(
                    _filter(users, function(user){ return user.age >= 30;}),
                    function(user){return user.name;}
                )
            );

            

        </script>
    </body>
</html>